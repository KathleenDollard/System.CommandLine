<Project>

  <PropertyGroup>
      <NoWarn Condition="'$(GenerateDocumentationFile)' == ''">$(NoWarn);CS1591</NoWarn>
      <GenerateDocumentationFile Condition="'$(GenerateDocumentationFile)' == ''">true</GenerateDocumentationFile>
  </PropertyGroup>

  <Target Name="_GenerateRealEntryPointType" BeforeTargets="CoreCompile">
    <PropertyGroup>
      <StartupObject>AutoGenerated.Program</StartupObject>
      <_GeneratedEntryPointFile>$(IntermediateOutputPath)Program.g.cs</_GeneratedEntryPointFile>
      <ActualEntryPointContent>
        <![CDATA[
using System.CommandLine.DragonFruit;

namespace AutoGenerated
{
  internal class Program
  {
    public static int Main(string[] args)
    {
      return CommandLine.ExecuteAssembly(
        assembly: typeof(Program).Assembly,
        args: args);
    }
  }
}
        ]]>
      </ActualEntryPointContent>
    </PropertyGroup>
    <WriteLinesToFile File="$(_GeneratedEntryPointFile)" Overwrite="true" Lines="$([MSBuild]::Escape($(ActualEntryPointContent)))" />
    <ItemGroup>
      <Compile Include="$(_GeneratedEntryPointFile)" Visible="false" />
    </ItemGroup>
  </Target>
</Project>
